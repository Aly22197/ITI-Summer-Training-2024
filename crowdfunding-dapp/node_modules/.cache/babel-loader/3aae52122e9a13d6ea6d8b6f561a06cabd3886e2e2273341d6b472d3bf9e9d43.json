{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aly\\\\Desktop\\\\Crowdfunding\\\\crowdfunding\\\\crowdfunding-dapp\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { BrowserProvider, Contract, parseEther, formatEther } from 'ethers';\nimport { contractAbi } from './Constant/constant.js';\nimport { contractAddress } from './Constant/constant.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [currentAccount, setCurrentAccount] = useState(null);\n  const [fundingAmount, setFundingAmount] = useState(\"\");\n  const [fundsRaised, setFundsRaised] = useState(\"0\");\n  useEffect(() => {\n    const init = async () => {\n      if (window.ethereum) {\n        const browserProvider = new BrowserProvider(window.ethereum);\n        setProvider(browserProvider);\n        const signer = await browserProvider.getSigner();\n        setSigner(signer);\n        const contract = new Contract(contractAddress, contractAbi, signer);\n        setContract(contract);\n        const accounts = await window.ethereum.request({\n          method: 'eth_requestAccounts'\n        });\n        setCurrentAccount(accounts[0]);\n\n        // Fetch initial funds raised\n        const initialFundsRaised = await contract.fundsRaised(); // Assuming fundsRaised is a public state variable\n        setFundsRaised(formatEther(initialFundsRaised));\n      } else {\n        console.log(\"Please install MetaMask!\");\n      }\n    };\n    init();\n  }, []);\n  const handleFundProject = async () => {\n    if (!signer || !contract) return;\n    try {\n      const valueInEther = parseEther(fundingAmount);\n      const transaction = await contract.fundProject({\n        value: valueInEther\n      });\n      await transaction.wait(); // Wait for the transaction to be confirmed\n      console.log('Transaction:', transaction);\n\n      // Update the funds raised after the transaction\n      const updatedFundsRaised = await contract.fundsRaised();\n      setFundsRaised(formatEther(updatedFundsRaised));\n    } catch (error) {\n      console.error(\"Transaction Error:\", error);\n    }\n  };\n  const handleRefund = async () => {\n    if (!signer || !contract) return;\n    try {\n      const transaction = await contract.refund();\n      await transaction.wait(); // Wait for the transaction to be confirmed\n      console.log('Refund Transaction:', transaction);\n\n      // Update the funds raised after the refund\n      const updatedFundsRaised = await contract.fundsRaised();\n      setFundsRaised(formatEther(updatedFundsRaised));\n    } catch (error) {\n      console.error(\"Refund Error:\", error);\n    }\n  };\n  const handleInputChange = event => {\n    setFundingAmount(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Crowdfunding DApp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Connected Account: \", currentAccount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Funds Raised: \", fundsRaised, \" ETH\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: fundingAmount,\n      onChange: handleInputChange,\n      placeholder: \"Enter amount to fund\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleFundProject,\n      children: \"Fund Project\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleRefund,\n      children: \"Request Refund\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"pp0OS6tr6MNsSLlErbS4YPuYhjk=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","BrowserProvider","Contract","parseEther","formatEther","contractAbi","contractAddress","jsxDEV","_jsxDEV","App","_s","provider","setProvider","signer","setSigner","contract","setContract","currentAccount","setCurrentAccount","fundingAmount","setFundingAmount","fundsRaised","setFundsRaised","init","window","ethereum","browserProvider","getSigner","accounts","request","method","initialFundsRaised","console","log","handleFundProject","valueInEther","transaction","fundProject","value","wait","updatedFundsRaised","error","handleRefund","refund","handleInputChange","event","target","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Aly/Desktop/Crowdfunding/crowdfunding/crowdfunding-dapp/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { BrowserProvider,Contract, parseEther,formatEther} from 'ethers';\nimport { contractAbi } from './Constant/constant.js';\nimport { contractAddress } from './Constant/constant.js';\n\nfunction App() {\n    const [provider, setProvider] = useState(null);\n    const [signer, setSigner] = useState(null);\n    const [contract, setContract] = useState(null);\n    const [currentAccount, setCurrentAccount] = useState(null);\n    const [fundingAmount, setFundingAmount] = useState(\"\");\n    const [fundsRaised, setFundsRaised] = useState(\"0\");\n\n    useEffect(() => {\n        const init = async () => {\n            if (window.ethereum) {\n                const browserProvider = new BrowserProvider(window.ethereum);\n                setProvider(browserProvider);\n\n                const signer = await browserProvider.getSigner();\n                setSigner(signer);\n\n                const contract = new Contract(contractAddress, contractAbi, signer);\n                setContract(contract);\n\n                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n                setCurrentAccount(accounts[0]);\n\n                // Fetch initial funds raised\n                const initialFundsRaised = await contract.fundsRaised(); // Assuming fundsRaised is a public state variable\n                setFundsRaised(formatEther(initialFundsRaised));\n            } else {\n                console.log(\"Please install MetaMask!\");\n            }\n        };\n\n        init();\n    }, []);\n\n    const handleFundProject = async () => {\n        if (!signer || !contract) return;\n\n        try {\n            const valueInEther = parseEther(fundingAmount);\n            const transaction = await contract.fundProject({ value: valueInEther });\n            await transaction.wait(); // Wait for the transaction to be confirmed\n            console.log('Transaction:', transaction);\n\n            // Update the funds raised after the transaction\n            const updatedFundsRaised = await contract.fundsRaised();\n            setFundsRaised(formatEther(updatedFundsRaised));\n        } catch (error) {\n            console.error(\"Transaction Error:\", error);\n        }\n    };\n\n    const handleRefund = async () => {\n        if (!signer || !contract) return;\n\n        try {\n            const transaction = await contract.refund();\n            await transaction.wait(); // Wait for the transaction to be confirmed\n            console.log('Refund Transaction:', transaction);\n\n            // Update the funds raised after the refund\n            const updatedFundsRaised = await contract.fundsRaised();\n            setFundsRaised(formatEther(updatedFundsRaised));\n        } catch (error) {\n            console.error(\"Refund Error:\", error);\n        }\n    };\n\n    const handleInputChange = (event) => {\n        setFundingAmount(event.target.value);\n    };\n\n    return (\n        <div>\n            <h1>Crowdfunding DApp</h1>\n            <p>Connected Account: {currentAccount}</p>\n            <p>Funds Raised: {fundsRaised} ETH</p>\n            <input \n                type=\"text\" \n                value={fundingAmount} \n                onChange={handleInputChange} \n                placeholder=\"Enter amount to fund\" \n            />\n            <button onClick={handleFundProject}>Fund Project</button>\n            <button onClick={handleRefund}>Request Refund</button>\n        </div>\n    );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}